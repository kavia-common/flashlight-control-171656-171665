{"is_source_file": true, "format": "Kotlin", "description": "This is the main activity source code for an Android application to control the device flashlight. It manages permissions, UI updates, flashlight toggling via CameraManager, and user settings. It also handles lifecycle events related to flashlight control.", "external_files": ["res/layout/activity_main.xml", "res/menu/menu_main.xml", "res/drawable/ic_flash_off_24.png", "res/drawable/ic_flash_on_24.png", "res/drawable/bg_button_ocean.xml", "res/anim/fade_in.xml", "strings.xml", "permissions.xml", "SettingsActivity.kt", "AboutActivity.kt"], "external_methods": ["androidx.activity.result.contract.ActivityResultContracts.RequestPermission()", "android.hardware.camera2.CameraManager.setTorchMode()", "android.hardware.camera2.CameraManager.getCameraCharacteristics()", "android.hardware.camera2.CameraManager.registerTorchCallback()", "android.hardware.camera2.CameraManager.unregisterTorchCallback()", "android.content.SharedPreferences.getBoolean()", "android.widget.Toast.makeText()", "android.view.animation.AnimationUtils.loadAnimation()", "android.view.WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON", "androidx.core.app.ActivityCompat.checkSelfPermission()"], "published": ["org.example.app.MainActivity"], "classes": [{"name": "MainActivity", "description": "Main activity class controlling flashlight toggle, UI, permissions, and lifecycle for the flashlight app."}], "methods": [{"name": "onCreate", "description": "Initializes UI components, sets up camera manager, permission handling, and registers torch callback."}, {"name": "onSaveInstanceState", "description": "Saves the current torch state during configuration changes."}, {"name": "onCreateOptionsMenu", "description": "Inflates the menu options."}, {"name": "onOptionsItemSelected", "description": "Handles menu item selections for navigation."}, {"name": "onDestroy", "description": "Cleans up callbacks and ensures flashlight is turned off."}, {"name": "hasCameraPermission", "description": "Checks if CAMERA permission is granted."}, {"name": "requestCameraPermission", "description": "Requests CAMERA permission at runtime."}, {"name": "toggleTorch", "description": "Toggles flashlight state and updates UI with animation."}, {"name": "setTorch", "description": "Sets the flashlight ON or OFF via CameraManager."}, {"name": "updateUIState", "description": "Enables/disables UI elements based on hardware capability."}, {"name": "applyKeepScreenOnFlag", "description": "Applies or clears 'keep screen on' flag based on user settings and torch state."}, {"name": "updateVisuals", "description": "Updates icon, button text, status message, and other UI elements to reflect flashlight state."}, {"name": "findBackCameraWithFlash", "description": "Finds the ID of the back camera with flash support."}], "calls": ["androidx.activity.result.contract.ActivityResultContracts.RequestPermission()", "android.hardware.camera2.CameraManager.setTorchMode()", "android.hardware.camera2.CameraManager.getCameraCharacteristics()", "android.hardware.camera2.CameraManager.registerTorchCallback()", "android.hardware.camera2.CameraManager.unregisterTorchCallback()", "android.widget.Toast.makeText()", "android.view.animation.AnimationUtils.loadAnimation()", "android.view.WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON", "androidx.core.app.ActivityCompat.checkSelfPermission()"], "search-terms": ["MainActivity", "TorchCallback", "setTorchMode", "CameraManager", "FLASH_INFO_AVAILABLE", "Permission", "toggle flashlight", "camera permission", "UI update", "Android flashlight control"], "state": 2, "file_id": 4, "knowledge_revision": 78, "git_revision": "f213ea26958bec27a9ae1284ecf143ed852e0018", "revision_history": [{"9": ""}, {"30": ""}, {"53": "d30a0aa2460aeca4978adef7a21dcd7acd10f237"}, {"55": "d30a0aa2460aeca4978adef7a21dcd7acd10f237"}, {"75": "f213ea26958bec27a9ae1284ecf143ed852e0018"}, {"76": "f213ea26958bec27a9ae1284ecf143ed852e0018"}, {"77": "f213ea26958bec27a9ae1284ecf143ed852e0018"}, {"78": "f213ea26958bec27a9ae1284ecf143ed852e0018"}], "hash": "e6ed33ca2cc9b0179b136eaa572e9e23", "format-version": 4, "code-base-name": "flashlight_app_frontend", "filename": "flashlight_app_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}