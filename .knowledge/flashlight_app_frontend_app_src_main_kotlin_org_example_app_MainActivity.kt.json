{"is_source_file": true, "format": "Kotlin", "description": "MainActivity.kt implementing flashlight toggle functionality and camera permission handling for an Android app.", "external_files": ["res/layout/activity_main.xml", "res/menu/menu_main.xml", "res/anim/fade_in.xml", "res/drawable/ic_flash_off_24.xml", "res/drawable/ic_flash_on_24.xml", "res/drawable/bg_button_ocean.xml", "strings.xml"], "external_methods": ["androidx.activity.result.contract.ActivityResultContracts.RequestPermission()", "registerForActivityResult()", "setContentView()", "findViewById()", "getSystemService()", "getString()", "startActivity()", "unregisterTorchCallback()", "checkSelfPermission()", "launch()", "setTorchMode()", "loadAnimation()", "startAnimation()", "getCameraCharacteristics()", "get()", "cameraIdList", "getSystemService()", "checkSelfPermission()"], "published": ["MainActivity"], "classes": [{"name": "MainActivity", "description": "Main activity class managing flashlight toggle, camera permissions, and UI updates."}], "methods": [{"name": "onCreate", "description": "Initializes the activity, sets up camera and UI, registers torch callback."}, {"name": "onSaveInstanceState", "description": "Saves torch state for configuration changes."}, {"name": "onCreateOptionsMenu", "description": "Inflates the options menu."}, {"name": "onOptionsItemSelected", "description": "Handles menu item selections, including navigation."}, {"name": "onDestroy", "description": "Cleans up resources and turns off torch on activity destruction."}, {"name": "hasCameraPermission", "description": "Checks if camera permission is granted."}, {"name": "requestCameraPermission", "description": "Requests camera permission at runtime."}, {"name": "toggleTorch", "description": "Toggles the flashlight on or off."}, {"name": "setTorch", "description": "Enables or disables the camera flashlight."}, {"name": "updateUIState", "description": "Enables/disables UI and updates status when flashlight is unavailable."}, {"name": "updateVisuals", "description": "Updates icons, texts, and button styles based on torch state."}, {"name": "findBackCameraWithFlash", "description": "Finds the ID of the back camera with flash available."}], "calls": ["registerForActivityResult()", "setContentView()", "findViewById()", "getSystemService()", "Toast.makeText()", "updateUIState()", "setOnClickListener()", "loadAnimation()", "startAnimation()", "setTorch()", "getCameraCharacteristics()", "unregisterTorchCallback()", "checkSelfPermission()", "launch()"], "search-terms": ["MainActivity", "CameraManager", "TorchCallback", "setTorchMode", "toggleButton", "flashlight", "runtime permission", "camera permission", "Android Kotlin flashlight control"], "state": 2, "file_id": 4, "knowledge_revision": 55, "git_revision": "d30a0aa2460aeca4978adef7a21dcd7acd10f237", "revision_history": [{"9": ""}, {"30": ""}, {"53": "d30a0aa2460aeca4978adef7a21dcd7acd10f237"}, {"55": "d30a0aa2460aeca4978adef7a21dcd7acd10f237"}], "hash": "a5ce0d215a9665d43cf83ebec46a8f80", "format-version": 4, "code-base-name": "flashlight_app_frontend", "filename": "flashlight_app_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}