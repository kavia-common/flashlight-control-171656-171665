{"is_source_file": true, "format": "Kotlin", "description": "MainActivity.kt is an Android activity that manages a user interface with a button to toggle the device's flashlight (torch). It handles permissions, camera hardware interactions, UI updates, and animations for the flashlight toggle feature.", "external_files": ["R.layout.activity_main", "R.string.permission_required", "R.string.no_flash_msg", "R.string.unable_control", "R.string.unavailable", "R.string.turn_off", "R.string.turn_on", "R.string.flash_on", "R.string.flash_off", "R.drawable.ic_flash_off_24", "R.drawable.ic_flash_on_24", "R.drawable.bg_button_ocean", "R.anim.fade_in"], "external_methods": ["androidx.activity.result.contract.ActivityResultContracts.RequestPermission", "android.app.ActivityCompat.checkSelfPermission", "android.widget.Toast.makeText", "androidx.core.app.ActivityCompat.checkSelfPermission", "androidx.lifecycle.Lifecycle", "android.os.Bundle", "androidx.activity.result.ActivityResultLauncher.launch", "androidx.camera.camera2.CameraManager.setTorchMode", "android.content.Context.getSystemService"], "published": ["org.example.app.MainActivity"], "classes": [{"name": "MainActivity", "description": "MainActivity is an Android activity managing UI and hardware interactions to control flashlight (torch) behavior, including permission handling, camera management, and animation effects."}], "methods": [{"name": "onCreate", "description": "Initializes UI components, camera manager, checks for flashlight availability, requests permissions, and registers torch callback."}, {"name": "onSaveInstanceState", "description": "Saves current torch state for state restoration."}, {"name": "onDestroy", "description": "Cleans up by unregistering torch callback and ensuring torch is turned off."}, {"name": "hasCameraPermission", "description": "Checks whether the camera permission has been granted."}, {"name": "requestCameraPermission", "description": "Requests camera permission at runtime if not already granted."}, {"name": "toggleTorch", "description": "Handles toggling of flashlight state with animation effects."}, {"name": "setTorch", "description": "Sets the flashlight on or off via CameraManager."}, {"name": "updateUIState", "description": "Enables or disables UI elements based on device capability and permission status."}, {"name": "updateVisuals", "description": "Updates UI visuals, including icons and button text, based on torch state."}, {"name": "findBackCameraWithFlash", "description": "Finds and returns the ID of the back camera with flash capability."}], "calls": ["androidx.activity.result.contract.ActivityResultContracts.RequestPermission", "androidx.appcompat.app.AppCompatActivity.setContentView", "androidx.activity.result.ActivityResultLauncher.launch", "cameraManager.setTorchMode", "AnimationUtils.loadAnimation", "iconView.startAnimation", "statusText.startAnimation", "toggleButton.startAnimation", "cameraManager.getCameraCharacteristics", "Toast.makeText", "getString", "getSystemService", "cameraManager.registerTorchCallback", "cameraManager.unregisterTorchCallback", "setTorch", "ActivityCompat.checkSelfPermission"], "search-terms": ["TorchCallback", "setTorchMode", "CameraManager", "MainActivity", "toggleButton", "cameraPermission", "flashlight", "animation", "permission_request", "camera_facing"], "state": 2, "file_id": 4, "knowledge_revision": 30, "git_revision": "", "revision_history": [{"9": ""}, {"30": ""}], "hash": "44806fc093ab6de21a414e5995444859", "format-version": 4, "code-base-name": "flashlight_app_frontend", "filename": "flashlight_app_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}