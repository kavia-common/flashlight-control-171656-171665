{"is_source_file": true, "format": "Kotlin", "description": "MainActivity.kt defines the main activity for an Android flashlight app. It manages camera permissions, toggles the device flashlight using Camera2 API's Torch mode, and provides UI interactions including menus, dialogs, and animations. It sets up camera parameters, handles lifecycle events to manage camera flashlight state, and responds to user input to turn the flashlight on/off, with support for permissions and device features.", "external_files": ["R.layout.activity_main", "R.string.*", "R.id.*", "R.menu.menu_main", "R.menu.menu_overflow_left", "R.drawable.*", "SettingsActivity", "AboutActivity", "PrivacyActivity", "PrivacyNoticeActivity", "OssListActivity", "R.anim.fade_in"], "external_methods": ["getSystemService", "registerForActivityResult", "Toast.makeText", "updateUIState", "runOnUiThread", "startActivity", "getSharedPreferences", "applyKeepScreenOnFlag", "setContentView", "findViewById", "setSupportActionBar", "getString", "menuInflater.inflate", "setOnMenuItemClickListener", "showVersionDialog", "showAboutDialog", "animationUtils.loadAnimation", "setImageResource", "setBackgroundResource"], "published": ["MainActivity"], "classes": [{"name": "MainActivity", "description": "Main activity handling flashlight toggle, permissions, UI, and system callbacks."}], "methods": [{"name": "onCreate", "description": "Initializes the activity, sets up UI components, camera manager, permissions, and callbacks."}, {"name": "onDestroy", "description": "Cleans up camera callback and turns off flashlight when activity is destroyed."}, {"name": "hasCameraPermission", "description": "Checks if the app has camera permission."}, {"name": "requestCameraPermission", "description": "Requests camera permission at runtime."}, {"name": "toggleTorch", "description": "Toggles flashlight state and updates visual feedback."}, {"name": "setTorch", "description": "Enables or disables the device flashlight using CameraManager."}, {"name": "updateUIState", "description": "Enables or disables UI elements based on camera availability."}, {"name": "applyKeepScreenOnFlag", "description": "Sets or clears the keep-screen-on flag based on user preference and torch state."}, {"name": "updateVisuals", "description": "Updates icon, button text, and status label according to torch state."}, {"name": "findBackCameraWithFlash", "description": "Finds the ID of the back camera with flash support."}], "calls": ["getSharedPreferences", "getString", "getPackageInfo", "Toast.makeText", "startActivity", "registerForActivityResult", "cameraManager.setTorchMode", "cameraManager.registerTorchCallback", "cameraManager.unregisterTorchCallback", "AnimationUtils.loadAnimation", "iconView.setImageResource", "statusText.setText", "toggleButton.setBackgroundResource", "showVersionDialog", "showAboutDialog"], "search-terms": ["TorchCallback", "setTorchMode", "CameraManager", " flashlight", "MainActivity", "toggleTorch", "CameraCharacteristics", "permission", "UI update", "animation"], "state": 2, "file_id": 4, "knowledge_revision": 104, "git_revision": "e1a535c302855ae8f0f1bc83b1e9c9bf1e2db4e9", "revision_history": [{"9": ""}, {"30": ""}, {"53": "d30a0aa2460aeca4978adef7a21dcd7acd10f237"}, {"55": "d30a0aa2460aeca4978adef7a21dcd7acd10f237"}, {"75": "f213ea26958bec27a9ae1284ecf143ed852e0018"}, {"76": "f213ea26958bec27a9ae1284ecf143ed852e0018"}, {"77": "f213ea26958bec27a9ae1284ecf143ed852e0018"}, {"78": "f213ea26958bec27a9ae1284ecf143ed852e0018"}, {"102": "e1a535c302855ae8f0f1bc83b1e9c9bf1e2db4e9"}, {"103": "e1a535c302855ae8f0f1bc83b1e9c9bf1e2db4e9"}, {"104": "e1a535c302855ae8f0f1bc83b1e9c9bf1e2db4e9"}], "hash": "11fef7fdb367c5fd9539a1edd9d3f298", "format-version": 4, "code-base-name": "flashlight_app_frontend", "filename": "flashlight_app_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}